–ü—Ä–µ–¥—ã–¥—É—â–∞—è –ª–µ–∫—Ü–∏—è |  | –°–ª–µ–¥—É—é—â–∞—è –ª–µ–∫—Ü–∏—è
:----------------:|:----------:|:----------------:
[–°–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏](./cs_edit_product2.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../readme.md#—Ç–µ–º–∞-514-c-–∏-mysql) | [API. REST API. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ ASP.NET Core.](./api_asp_net_core.md)

# –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞. CRUD –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞

>**CRUD** - –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ –æ—Ç —Å–ª–æ–≤ **C**reate, **R**ead, **U**pdate, **D**elete - –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å –ª—é–±—ã–º –Ω–∞–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö.

>**–ó–∞–¥–∞–Ω–∏–µ:**
>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏, —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞. –í —Å–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ —É–¥–∞–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ–ª–∂–Ω—ã –≤—ã–±–∏—Ä–∞—Ç—å—Å—è –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é.

–°–Ω–∞—á–∞–ª–∞ —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —ç—Ç–æ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª –≤—ã —Å–¥–µ–ª–∞–ª–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É —Ä–∞—Å–ø–∏—à—É –≤ —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏

* [Read](#read-–≤—ã–≤–æ–¥-—Å–ø–∏—Å–∫–∞)
* [Delete](#delete-—É–¥–∞–ª–µ–Ω–∏–µ-–º–∞—Ç–µ—Ä–∏–∞–ª–∞-–ø—Ä–æ–¥—É–∫—Ç–∞)

–í –∏—Ç–æ–≥–µ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ (—Å–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π):

![](../img/cs008.png)

## Read (–≤—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞)

–ü–æ–ª—É—á–∞–µ–º –∏–∑ –±–∞–∑—ã —Å–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ *—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞* –∏ –≤—ã–≤–æ–¥–∏–º —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—è **ListView**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞. 

    –°–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –æ–∫–Ω–∞ **EditProductWindow**. 
    
    –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–æ–¥—É–∫—Ç–∞ (–≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ —ç—Ç–æ –æ—á–µ–≤–∏–¥–Ω–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ **ProductMaterial**. –≠—Ç–æ, —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è, **—Ç–∞–±–ª–∏—Ü–∞ —Å–≤—è–∑–µ–π**  - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è *–º–Ω–æ–≥–∏–µ (–ø—Ä–æ–¥—É–∫—Ç—ã) - –∫–æ - –º–Ω–æ–≥–∏–º (–º–∞—Ç–µ—Ä–∏–∞–ª–∞–º)*. –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –Ω–∞–¥–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ç–æ–ª—å–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞, —Ç.–µ. —É–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–º—É –ø—Ä–æ–¥—É–∫—Ç—É –ø—Ä–∏ –≤—ã–±–æ—Ä–∫–µ: 

    ```cs
    public IEnumerable<ProductMaterial> ProductMaterialList { get; set; }

    public EditProductWindow(Product EditProduct)
    {
        InitializeComponent();
        DataContext = this;
        CurrentProduct = EditProduct;
        using (var context = new dbContext())
        {
            ProductTypeList = context.ProductTypes.ToList();
        }

        // —Ç–æ —á—Ç–æ –≤—ã—à–µ —É –≤–∞—Å —É–∂–µ –±—ã–ª–æ

        // —á—Ç–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∑–∞–≤–µ—Ä–Ω—ë–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥,
        // —Ç.–∫. –µ–≥–æ –ø—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏   
        LoadProductMaterials();
    }

    private LoadProductMaterials()
    {
        using (var context = new dbContext())
        {
            ProductMaterialList = context.ProductMaterials
                // —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É
                .Where(pm => pm.ProductId == CurrentProduct.Id)
                // –≤–∫–ª—é—á–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö (–Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ)
                .Include(pm => pm.Material)
                .ToList();
        }
        Invalidate("ProductMaterialList");
    }
    ```

2. –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞

    –¢—É—Ç –æ–±—ã—á–Ω—ã–π **ListView**, –Ω–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º—ã –Ω–∞—Ä–∏—Å—É–µ–º –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å", —á—Ç–æ–±—ã —É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–µ –∑–∞—Ö–æ–¥—è –≤ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

    ```xml
    <ListView
        ItemsSource="{Binding ProductMaterialList}"
        x:Name="ProductMaterialtListView" 
        MouseDoubleClick="ProductMaterialtListView_MouseDoubleClick"
    >
        <ListView.ItemContainerStyle>
            <Style 
                TargetType="ListViewItem"
            >
                <Setter 
                    Property="HorizontalContentAlignment"
                    Value="Stretch" />
            </Style>
        </ListView.ItemContainerStyle>
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid >
                    <!-- –≤ —Å–ø–∏—Å–∫–µ 3 –∫–æ–ª–æ–Ω–∫–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è -->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>
                    <!-- —Ç—É—Ç –≤—ã —É–∂–µ –¥–æ–ª–∂–Ω—ã —Å–∞–º–∏ —Å–æ–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                    <TextBlock 
                        Text="{Binding Material}"/>
                    <!-- —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ –¥–æ–±–∞–≤–∏–º –≥—Ä–∞–Ω–∏—Ü—ã —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞ -->
                    <TextBlock     
                        Grid.Column="1" 
                        Margin="10,0"
                        Text="{Binding Count}"/>
                    <!-- –∫–Ω–æ–ø–∫–∞ "—É–¥–∞–ª–∏—Ç—å" -->
                    <TextBlock
                        x:Name="DeleteMaterialTextBlock" 
                        Grid.Column="2"
                        Tag="{Binding Path=.}"
                        Text="üóë" 
                        MouseDown="DeleteMaterialTextBlock_MouseDown"/>
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
    ```

    –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–Ω–æ–ø–∫–∏ "–£–¥–∞–ª–∏—Ç—å":

    - –≤–º–µ—Å—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–∞ **Button** –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç–ª–µ–º–µ–Ω—Ç **TextBlock** (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω–æ –≤ —Å–ø–∏—Å–∫–µ)
    - –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º UTF —Å–∏–º–≤–æ–ª –∫–æ—Ä–∑–∏–Ω—ã 
    - –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –Ω–∞ –∫–∞–∫–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ —Å–ø–∏—Å–∫–∞ –º—ã –∫–ª–∏–∫–Ω—É–ª–∏, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∞—Ç—Ä—É–±—É—Ç–µ **Tag** —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ (**Path=.**). –ê—Ç—Ä–∏–±—É—Ç **Tag** –µ—Å—Ç—å —É –≤—Å–µ—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –≤ –Ω—ë–º –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç. 

## Delete (—É–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø—Ä–æ–¥—É–∫—Ç–∞)

–†–µ–∞–ª–∏–∑—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ —É–¥–∞–ª–µ–Ω–∏—è:

```cs
private void DeleteMaterialTextBlock_MouseDown(object sender, MouseButtonEventArgs e)
{
    // sender (–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –º–µ—Ç–æ–¥–∞) —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º—ã –∫–ª–∏–∫–Ω—É–ª–∏
    // (sender as TextBlock) –ø—Ä–∏–≤–æ–¥–∏—Ç –æ–±—ä–µ–∫—Ç –∫ —Ç–∏–ø—É TextBlock
    // (sender as TextBlock).Tag as ProductMaterial - –∞—Ç—Ä–∏–±—É—Ç Tag –º—ã –ø—Ä–∏–≤–æ–¥–∏–º –∫ –∫–ª–∞—Å—Å—É ProductMaterial
    var productMaterial = (sender as TextBlock).Tag as ProductMaterial;

    using (var context = new dbContext())
    {
        // –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —É–¥–∞–ª—è–µ–º–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å, 
        // —á—Ç–æ —É –Ω–µ–≥–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –∏ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—è –∫–ª—é—á–∞ 
        // –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤ –ø–µ—Ä–≤–∏—á–Ω–æ–º –∫–ª—é—á–µ
        var deletedProductMaterial = context.ProductMaterials
            .Find(productMaterial.ProductId, productMaterial.MaterialId);

        context.ProductMaterials.Remove(deletedProductMaterial);
        
        if (context.SaveChanges() > 0)
            LoadProductMaterials();
    }
}
```

–°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –≤ —Ç–∞–±–ª–∏—Ü–µ **ProductMaterial**

![](../img/cs009.png)

---

–ü—Ä–µ–¥—ã–¥—É—â–∞—è –ª–µ–∫—Ü–∏—è |  | –°–ª–µ–¥—É—é—â–∞—è –ª–µ–∫—Ü–∏—è
:----------------:|:----------:|:----------------:
[–°–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏](./cs_edit_product2.md) | [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](../readme.md#—Ç–µ–º–∞-514-c-–∏-mysql) | [API. REST API. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ ASP.NET Core.](./api_asp_net_core.md)
